!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("jquery")):"function"==typeof define&&define.amd?define(["exports","jquery"],t):t(r.install={},r.jQuery)}(this,function(r,s){"use strict";function t(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function e(r,t){return r(t={exports:{}},t.exports),t.exports}s=s&&s.hasOwnProperty("default")?s.default:s;var n=e(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.init_database_setup=function(){function t(){var r=!0,t=s.trim(String(s("#host").val()));t?s("#err_msg_host").html(""):(s("#err_msg_host").html("数据库服务器地址不正确"),r=!1);var e=s("#port").val();!e||isNaN(parseInt(String(e),10))?(s("#err_msg_port").html("数据库端口不正确"),r=!1):s("#err_msg_port").html("");var n=s.trim(String(s("#username").val()));n?s("#err_msg_user").html(""):(s("#err_msg_user").html("用户名不正确"),r=!1);var o=s("#password").val();o?s("#err_msg_password").html(""):(s("#err_msg_password").html("密码不正确"),r=!1);var a=s.trim(String(s("#name").val()));return a?s("#err_msg_name").html(""):(s("#err_msg_name").html("数据库名不正确"),r=!1),r?{host:t,port:e,user:n,password:o,name:a}:null}s("input").on("input",function(){t()}),s("#ok").on("click",function(r){r.preventDefault(),t()&&s("#setup-database-form").submit()})}});t(n);n.init_database_setup;var o=e(function(r,t){Object.defineProperty(t,"__esModule",{value:!0});var u=function(r,t){return r<<t|r>>>32-t},m=function(r,t){var e=2147483648&r,n=2147483648&t,o=1073741824&r,a=1073741824&t,s=(1073741823&r)+(1073741823&t);return o&a?2147483648^s^e^n:o|a?1073741824&s?3221225472^s^e^n:1073741824^s^e^n:s^e^n},p=function(r,t,e,n,o,a,s){var i;return r=m(r,m(m((i=t)&e|~i&n,o),s)),m(u(r,a),t)},c=function(r,t,e,n,o,a,s){var i;return r=m(r,m(m(t&(i=n)|e&~i,o),s)),m(u(r,a),t)},d=function(r,t,e,n,o,a,s){return r=m(r,m(m(t^e^n,o),s)),m(u(r,a),t)},f=function(r,t,e,n,o,a,s){return r=m(r,m(m(e^(t|~n),o),s)),m(u(r,a),t)},h=function(r){var t,e="",n="";for(t=0;t<=3;t++)e+=(n="0"+(r>>>8*t&255).toString(16)).substr(n.length-2,2);return e};t.md5=function(r){var t,e,n,o,a,s,i,u,l,_=function(r){for(var t,e=r.length,n=e+8,o=16*((n-n%64)/64+1),a=Array(o-1),s=0,i=0;i<e;)s=i%4*8,a[t=(i-i%4)/4]=a[t]|r.charCodeAt(i)<<s,i++;return s=i%4*8,a[t=(i-i%4)/4]=a[t]|128<<s,a[o-2]=e<<3,a[o-1]=e>>>29,a}(r=function(r){r=r.replace(/\x0d\x0a/g,"\n");for(var t="",e=0;e<r.length;e++){var n=r.charCodeAt(e);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t}(r));for(s=1732584193,i=4023233417,u=2562383102,l=271733878,t=0;t<_.length;t+=16)s=p(e=s,n=i,o=u,a=l,_[t+0],7,3614090360),l=p(l,s,i,u,_[t+1],12,3905402710),u=p(u,l,s,i,_[t+2],17,606105819),i=p(i,u,l,s,_[t+3],22,3250441966),s=p(s,i,u,l,_[t+4],7,4118548399),l=p(l,s,i,u,_[t+5],12,1200080426),u=p(u,l,s,i,_[t+6],17,2821735955),i=p(i,u,l,s,_[t+7],22,4249261313),s=p(s,i,u,l,_[t+8],7,1770035416),l=p(l,s,i,u,_[t+9],12,2336552879),u=p(u,l,s,i,_[t+10],17,4294925233),i=p(i,u,l,s,_[t+11],22,2304563134),s=p(s,i,u,l,_[t+12],7,1804603682),l=p(l,s,i,u,_[t+13],12,4254626195),u=p(u,l,s,i,_[t+14],17,2792965006),i=p(i,u,l,s,_[t+15],22,1236535329),s=c(s,i,u,l,_[t+1],5,4129170786),l=c(l,s,i,u,_[t+6],9,3225465664),u=c(u,l,s,i,_[t+11],14,643717713),i=c(i,u,l,s,_[t+0],20,3921069994),s=c(s,i,u,l,_[t+5],5,3593408605),l=c(l,s,i,u,_[t+10],9,38016083),u=c(u,l,s,i,_[t+15],14,3634488961),i=c(i,u,l,s,_[t+4],20,3889429448),s=c(s,i,u,l,_[t+9],5,568446438),l=c(l,s,i,u,_[t+14],9,3275163606),u=c(u,l,s,i,_[t+3],14,4107603335),i=c(i,u,l,s,_[t+8],20,1163531501),s=c(s,i,u,l,_[t+13],5,2850285829),l=c(l,s,i,u,_[t+2],9,4243563512),u=c(u,l,s,i,_[t+7],14,1735328473),i=c(i,u,l,s,_[t+12],20,2368359562),s=d(s,i,u,l,_[t+5],4,4294588738),l=d(l,s,i,u,_[t+8],11,2272392833),u=d(u,l,s,i,_[t+11],16,1839030562),i=d(i,u,l,s,_[t+14],23,4259657740),s=d(s,i,u,l,_[t+1],4,2763975236),l=d(l,s,i,u,_[t+4],11,1272893353),u=d(u,l,s,i,_[t+7],16,4139469664),i=d(i,u,l,s,_[t+10],23,3200236656),s=d(s,i,u,l,_[t+13],4,681279174),l=d(l,s,i,u,_[t+0],11,3936430074),u=d(u,l,s,i,_[t+3],16,3572445317),i=d(i,u,l,s,_[t+6],23,76029189),s=d(s,i,u,l,_[t+9],4,3654602809),l=d(l,s,i,u,_[t+12],11,3873151461),u=d(u,l,s,i,_[t+15],16,530742520),i=d(i,u,l,s,_[t+2],23,3299628645),s=f(s,i,u,l,_[t+0],6,4096336452),l=f(l,s,i,u,_[t+7],10,1126891415),u=f(u,l,s,i,_[t+14],15,2878612391),i=f(i,u,l,s,_[t+5],21,4237533241),s=f(s,i,u,l,_[t+12],6,1700485571),l=f(l,s,i,u,_[t+3],10,2399980690),u=f(u,l,s,i,_[t+10],15,4293915773),i=f(i,u,l,s,_[t+1],21,2240044497),s=f(s,i,u,l,_[t+8],6,1873313359),l=f(l,s,i,u,_[t+15],10,4264355552),u=f(u,l,s,i,_[t+6],15,2734768916),i=f(i,u,l,s,_[t+13],21,1309151649),s=f(s,i,u,l,_[t+4],6,4149444226),l=f(l,s,i,u,_[t+11],10,3174756917),u=f(u,l,s,i,_[t+2],15,718787259),i=f(i,u,l,s,_[t+9],21,3951481745),s=m(s,e),i=m(i,n),u=m(u,o),l=m(l,a);return(h(s)+h(i)+h(u)+h(l)).toLowerCase()}});t(o);o.md5;var a=e(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.init_admin_setup=function(){function t(){var r=!0;s.trim(String(s("#account").val()))?s("#err_msg_account").html(""):(s("#err_msg_account").html("管理员账号不正确"),r=!1),s.trim(String(s("#email").val()))?s("#err_msg_email").html(""):(s("#err_msg_email").html("管理员邮箱不正确"),r=!1);var t=s("#password").val();return t?s("#err_msg_password").html(""):(s("#err_msg_password").html("管理员密码不正确"),r=!1),t!==s("#password2").val()?(s("#err_msg_password2").html("两次密码输入不匹配"),r=!1):s("#err_msg_password2").html(""),r}s("input").on("input",function(){t()}),s("#ok").on("click",function(r){r.preventDefault(),t()&&(s("#md5password").val(o.md5(String(s("#password").val()))),s("#admin_account_form").submit())})}});t(a);a.init_admin_setup;var i=e(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.init_storage_setup=function(){function t(){var r=s("#external").prop("checked"),t=!0;if(s("#host").prop("disabled",!r),s("#port").prop("disabled",!r),r){s("#type").val("web"),s.trim(String(s("#host").val()))?s("#err_msg_host").html(""):(s("#err_msg_host").html("资源服务器地址不正确"),t=!1);var e=s("#port").val();!e||isNaN(parseInt(String(e),10))?(s("#err_msg_port").html("资源服务器端口不正确"),t=!1):s("#err_msg_port").html("")}else s("#type").val("local"),s("#err_msg_host").html(""),s("#err_msg_port").html("");return t}s("input").on("input",function(){t()}),s("#ok").on("click",function(r){r.preventDefault(),t()&&s("#setup-storage-form").submit()})}});t(i);i.init_storage_setup;var u=e(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.init_redis_setup=function(){function t(){var r=s("#external").prop("checked"),t=!0;if(s("#host").prop("disabled",!r),s("#port").prop("disabled",!r),r){s("#type").val("web"),s.trim(String(s("#host").val()))?s("#err_msg_host").html(""):(s("#err_msg_host").html("Redis服务器地址不正确"),t=!1);var e=s("#port").val();!e||isNaN(parseInt(String(e),10))?(s("#err_msg_port").html("Redis服务器端口不正确"),t=!1):s("#err_msg_port").html("")}else s("#type").val("local"),s("#err_msg_host").html(""),s("#err_msg_port").html("");return t}s("input").on("input",function(){t()}),s("#ok").on("click",function(r){r.preventDefault(),t()&&s("#setup-redis-form").submit()})}});t(u);u.init_redis_setup;var l=e(function(r,t){Object.defineProperty(t,"__esModule",{value:!0});var e=function(r){switch(r){case"database":n.init_database_setup();break;case"admin":a.init_admin_setup();break;case"storage":i.init_storage_setup();break;case"redis":u.init_redis_setup()}};t.InstallServer=e}),_=t(l),m=l.InstallServer;r.default=_,r.InstallServer=m,Object.defineProperty(r,"__esModule",{value:!0})});
