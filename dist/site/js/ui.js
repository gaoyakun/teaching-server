!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("jquery")):"function"==typeof define&&define.amd?define(["exports","jquery"],t):t(e.ui={},e.jQuery)}(this,function(e,y){"use strict";y=y&&y.hasOwnProperty("default")?y.default:y;var i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o(e,t){return e(t={exports:{}},t.exports),t.exports}var l=o(function(e,t){var u=i&&i.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],o=0;return t?t.call(e):{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function f(e,t){this.$el=jQuery(e);var o=this.constructor.defaults;this.options=jQuery.extend({},o,t)}return f.register=function(d,e){var c=function(){return"widget_"+e};function p(e,t){var o=jQuery.data(e,t);return o&&o instanceof f?o:null}jQuery.fn[e]=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(void 0===e||"object"==typeof e)return function(e,t){var o,r,n=c();try{for(var i=u(e.get()),l=i.next();!l.done;l=i.next()){var s=l.value;if(!p(s,n)){var a=new d(s,t);jQuery.data(s,n)||jQuery.data(s,n,a),a._init()}}}catch(e){o={error:e}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return e}(this,e);if("string"==typeof e&&"_"!==e[0]){var r=e;return"destroy"===r?function(e){var t,o,r=c();try{for(var n=u(e.get()),i=n.next();!i.done;i=n.next()){var l=i.value,s=p(l,r);s&&s.destroy(),jQuery.removeData(l,r)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}}(this):"getWidgetClass"===r?d:function(e,t,o){var r,n,i=null;try{for(var l=u(e.get()),s=l.next();!s.done;s=l.next()){var a=s.value,d=jQuery.data(a,c());if(d&&d instanceof f){var p=d[t];p&&"function"==typeof p&&(i=p.apply(d,o))}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return i}(this,r,t)}}},f.prototype.destroy=function(){this._deinit()},f.prototype._init=function(){},f.prototype._deinit=function(){},f.defaults={},f}();t.Widget=o});t(l);l.Widget;var r=o(function(e,t){var r,o=i&&i.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),d=i&&i.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],o=0;return t?t.call(e):{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._contentPanel=null,e._selectedNodes=[],e._nodeMap={},e}return o(e,t),e.prototype.getNodes=function(e){var t,o;if("string"==typeof e)return this._nodeMap[e]||[];if(e instanceof RegExp){var r=[];for(var n in this._nodeMap)if(e.test(n))try{for(var i=d(this._nodeMap[n]),l=i.next();!l.done;l=i.next()){var s=l.value;r.push(s)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}return r}return e?[e]:[]},e.prototype.toggleSelectNodes=function(e){var t,o,r=this.getNodes(e);try{for(var n=d(r),i=n.next();!i.done;i=n.next()){var l=i.value;this._selectNode(l,!l.selected)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}1<this._selectedNodes.length&&(this.options.multiSelect=!0)},e.prototype.selectNodes=function(e){var t,o,r=this.getNodes(e);try{for(var n=d(r),i=n.next();!i.done;i=n.next()){var l=i.value;l.selected||this._selectNode(l,!0)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}1<this._selectedNodes.length&&(this.options.multiSelect=!0)},e.prototype.deselectNodes=function(e){var t,o,r=this.getNodes(e);try{for(var n=d(r),i=n.next();!i.done;i=n.next()){var l=i.value;l.selected&&this._selectNode(l,!1)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}},e.prototype.toggleCollapsingNodes=function(e){this._toggleCollapsingNodes(this.getNodes(e))},e.prototype.collapseNodes=function(e){this._toggleCollapsingNodes(this.getNodes(e).filter(function(e,t,o){return!!e.expanded}))},e.prototype.expandNodes=function(e){this._toggleCollapsingNodes(this.getNodes(e).filter(function(e,t,o){return!e.expanded}))},e.prototype._init=function(){var o=this;this.$el.off("itemclick"),this.$el.on("itemclick",function(e,t){console.log("internal"),o.options.multiSelect?o.toggleSelectNodes(t):(o.deselectNodes(/^.*$/),o.selectNodes(t))}),this._contentPanel=y("<div></div>").appendTo(this.$el).addClass(["folder-tree-container"]),this.options.borderColor&&this._contentPanel.css({borderColor:this.options.borderColor}),this._create(this._contentPanel,this.options,0),1<this._selectedNodes.length&&(this.options.multiSelect=!0)},e.prototype._selectNode=function(e,t){if(e.selected=t,e.element&&(t?e.element&&e.element.addClass(["active"]):e.element&&e.element.removeClass(["active"])),t&&this._selectedNodes.indexOf(e)<0)this._selectedNodes.push(e);else if(!t){var o=this._selectedNodes.indexOf(e);0<=o&&this._selectedNodes.splice(o,1)}},e.prototype._toggleCollapsingNodes=function(e){var t,o;try{for(var r=d(e),n=r.next();!n.done;n=r.next()){var i=n.value;if(i.element&&i.nodes&&0!==i.nodes.length){var l=i.element.find(">a>a>i");l.removeClass(this.getNodeProp("iconExpand",!0,i).split(" "));var s=i.element.find(">a>span>i"),a=this.getNodeProp("icon",!0,i);a&&s.removeClass(a.split(" ")),i.expanded=!i.expanded,l.addClass(this.getNodeProp("iconExpand",!0,i).split(" ")),(a=this.getNodeProp("icon",!0,i))&&s.addClass(a.split(" ")),i.expanded?i.element.next().removeClass(["collapsed"]):i.element.next().addClass(["collapsed"])}}}catch(e){t={error:e}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(t)throw t.error}}},e.prototype._create=function(e,f,u){var h=this;e.empty();var v=y("<ul></ul>").appendTo(e);return f.nodes.forEach(function(t,e){var o=h._nodeMap[t.id]||[];o.push(t),h._nodeMap[t.id]=o;var r=u+"rem",n=y("<li></li>").appendTo(v);t.element=n,h._selectNode(t,!!t.selected);var i=y("<a></a>").appendTo(n);i.css({fontSize:h.getNodeProp("textSize",!0,t),color:h.getNodeProp("textColor",!0,t),paddingLeft:r}),"string"==typeof f.itemHeight&&i.css({height:f.itemHeight,lineHeight:f.itemHeight}),i.on("click",function(){h.$el.trigger("itemclick",t)});var l=y("<span></span>").appendTo(i),s=h.getNodeProp("icon",!1,t);if("string"==typeof s)y("<i></i>").appendTo(l).addClass(s.split(" ")).css({color:h.getNodeProp("iconColor",!0,t),fontSize:h.getNodeProp("iconSize",!0,t)}).after(t.text);else{var a=h.getNodeProp("icon",!0,t)||"fa fa-folder";y("<i></i>").appendTo(l).addClass(a.split(" ")).css({color:"rgba(0,0,0,0)",fontSize:h.getNodeProp("iconSize",!0,t)}).after(t.text)}if(t.nodes&&0<t.nodes.length){var d=y("<a></a>").appendTo(i);d.attr("href","javascript:void(0)");var p=h.getNodeProp("iconExpand",!0,t);y("<i></i>").appendTo(d).addClass(p.split(" ")).css({color:h.getNodeProp("iconExpandColor",!0,t),fontSize:h.getNodeProp("iconExpandSize",!0,t)}),d.on("click",function(e){e.cancelBubble=!0,e.stopPropagation(),h.toggleCollapsingNodes(t)});var c=y("<li></li>").appendTo(v);h._create(c,{itemHeight:f.itemHeight,props:f.props,propsExpanded:f.propsExpanded,nodes:t.nodes},u+1),t.expanded||c.addClass(["collapsed"])}}),!0},e.prototype.getProp=function(e,t){return t&&t[e]},e.prototype.getNodeProp=function(e,t,o){var r=o&&this.getProp(e,o.expanded?o.propsExpanded:o.props);return(void 0===r||t&&null===r)&&(r=this.getProp(e,o&&o.expanded?this.options.propsExpanded:this.options.props)),r},e.defaults={itemHeight:"43px",borderColor:"#e1e4e9",multiSelect:!1,props:{textSize:"inherit",textColor:"inherit",icon:"fa fa-folder",iconExpand:"fa fa-angle-down",iconSize:"inherit",iconColor:"inherit",iconExpandSize:"inherit",iconExpandColor:"inherit"},propsExpanded:{textSize:"inherit",textColor:"inherit",icon:"fa fa-folder-open",iconExpand:"fa fa-angle-up",iconSize:"inherit",iconColor:"inherit",iconExpandSize:"inherit",iconExpandColor:"inherit"},nodes:[]},e}(l.Widget);t.FolderTree=n});t(r);r.FolderTree;var n=o(function(e,t){var r,n=i&&i.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=i&&i.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],o=0;return t?t.call(e):{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e._contentPanel=null,e._selectedNodes=[],e._nodeMap={},e}return n(o,t),o.prototype.getNodes=function(e){var t,o;if("string"==typeof e)return this._nodeMap[e]||[];if(e instanceof RegExp){var r=[];for(var n in this._nodeMap)if(e.test(n))try{for(var i=a(this._nodeMap[n]),l=i.next();!l.done;l=i.next()){var s=l.value;r.push(s)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}return r}return e?[e]:[]},o.prototype.toggleSelectNodes=function(e){var t,o,r=this.getNodes(e);try{for(var n=a(r),i=n.next();!i.done;i=n.next()){var l=i.value;this._selectNode(l,!l.selected)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}1<this._selectedNodes.length&&(this.options.multiSelect=!0)},o.prototype.selectNodes=function(e){var t,o,r=this.getNodes(e);try{for(var n=a(r),i=n.next();!i.done;i=n.next()){var l=i.value;l.selected||this._selectNode(l,!0)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}1<this._selectedNodes.length&&(this.options.multiSelect=!0)},o.prototype.deselectNodes=function(e){var t,o,r=this.getNodes(e);try{for(var n=a(r),i=n.next();!i.done;i=n.next()){var l=i.value;l.selected&&this._selectNode(l,!1)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}},o.prototype.setData=function(e){this.options=jQuery.extend({},o.defaults,e),this._init()},o.prototype._init=function(){this._contentPanel||(this._contentPanel=y("<div></div>").appendTo(this.$el).addClass(["gridview-container"]),this.options.borderColor&&this._contentPanel.css({borderColor:this.options.borderColor})),this._create(this._contentPanel,this.options),1<this._selectedNodes.length&&(this.options.multiSelect=!0)},o.prototype._selectNode=function(e,t){if(e.selected=t,e.element&&(t?e.element&&e.element.addClass(["active"]):e.element&&e.element.removeClass(["active"])),t&&this._selectedNodes.indexOf(e)<0)this._selectedNodes.push(e);else if(!t){var o=this._selectedNodes.indexOf(e);0<=o&&this._selectedNodes.splice(o,1)}},o.prototype._create=function(e,t){var s=this;e.empty();var a=y("<div></div>").appendTo(e).css({display:"flex",flexWrap:"wrap",flexDirection:"row",width:"100%"});return t.nodes.forEach(function(e,t){var o=s._nodeMap[e.id]||[];o.push(e),s._nodeMap[e.id]=o;var r=e.element=y("<a></a>").appendTo(a).css({display:"block",margin:"15px",width:s.options.itemMinWidth}).on("click",function(){s.$el.trigger("itemclick",e)});s._selectNode(e,!!e.selected);var n=y("<div></div>").appendTo(r).css({position:"relative",display:"block",width:"100%",minHeight:s.options.itemMinHeight}),i=y("<img/>").appendTo(n).css({width:s.options.itemMinWidth,height:s.options.itemMinHeight});e.thumbUrl&&i.attr("src",e.thumbUrl);var l=y("<div></div>").appendTo(r).css({width:"100%"});y("<p></p>").appendTo(l).css({textAlign:"center",wordBreak:"normal",whiteSpace:"pre-wrap",wordWrap:"break-word",fontSize:s.getNodeProp("textSize"),color:s.getNodeProp("textColor")}).html(e.text)}),!0},o.prototype.getProp=function(e,t){return t&&t[e]},o.prototype.getNodeProp=function(e,t,o){var r=o&&this.getProp(e,o.selected?o.propsSelected:o.props);return(void 0===r||t&&null===r)&&(r=this.getProp(e,o&&o.selected?this.options.propsSelected:this.options.props)),r},o.defaults={itemMinHeight:"128px",itemMaxHeight:"none",itemMinWidth:"128px",itemMaxWidth:"none",borderColor:"#e1e4e9",multiSelect:!1,props:{textSize:"inherit",textColor:"inherit"},propsSelected:{textSize:"inherit",textColor:"inherit"},nodes:[]},o}(l.Widget);t.GridView=o});t(n);n.GridView;var s=o(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FolderTree=r.FolderTree,t.GridView=n.GridView,t.Widget=l.Widget});t(s);s.FolderTree,s.GridView,s.Widget;var a=t(o(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),s.Widget.register(s.FolderTree,"folderTree"),s.Widget.register(s.GridView,"gridView")}));e.default=a,Object.defineProperty(e,"__esModule",{value:!0})});
