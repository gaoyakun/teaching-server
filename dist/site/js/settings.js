!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("jquery")):"function"==typeof define&&define.amd?define(["exports","jquery"],t):t(e.settings={},e.jQuery)}(this,function(e,v){"use strict";v=v&&v.hasOwnProperty("default")?v.default:v;var o="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var s=n(function(e,t){var f=o&&o.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function d(e,t){this.$el=jQuery(e);var n=this.constructor.defaults;this.options=jQuery.extend({},n,t)}return d.register=function(u,e){var c=function(){return"widget_"+e};function h(e,t){var n=jQuery.data(e,t);return n&&n instanceof d?n:null}jQuery.fn[e]=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(void 0===e||"object"==typeof e)return function(e,t){var n,r,i=c();try{for(var o=f(e.get()),s=o.next();!s.done;s=o.next()){var a=s.value;if(!h(a,i)){var l=new u(a,t);jQuery.data(a,i)||jQuery.data(a,i,l),l._init()}}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return e}(this,e);if("string"==typeof e&&"_"!==e[0]){var r=e;return"destroy"===r?function(e){var t,n,r=c();try{for(var i=f(e.get()),o=i.next();!o.done;o=i.next()){var s=o.value,a=h(s,r);a&&a.destroy(),jQuery.removeData(s,r)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}(this):"getWidgetClass"===r?u:function(e,t,n){var r,i,o=null;try{for(var s=f(e.get()),a=s.next();!a.done;a=s.next()){var l=a.value,u=jQuery.data(l,c());if(u&&u instanceof d){var h=u[t];h&&"function"==typeof h&&(o=h.apply(u,n))}}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o}(this,r,t)}}},d.prototype.destroy=function(){this._deinit()},d.prototype._init=function(){},d.prototype._deinit=function(){},d.defaults={},d}();t.Widget=n});t(s);s.Widget;var r=n(function(e,t){var r,n=o&&o.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=o&&o.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._contentPanel=null,e._selectedNodes=[],e._nodeMap={},e}return n(e,t),e.prototype.getNodes=function(e){var t,n;if("string"==typeof e)return this._nodeMap[e]||[];if(e instanceof RegExp){var r=[];for(var i in this._nodeMap)if(e.test(i))try{for(var o=u(this._nodeMap[i]),s=o.next();!s.done;s=o.next()){var a=s.value;r.push(a)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}return e?[e]:[]},e.prototype.toggleSelectNodes=function(e){var t,n,r=this.getNodes(e);try{for(var i=u(r),o=i.next();!o.done;o=i.next()){var s=o.value;this._selectNode(s,!s.selected)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}1<this._selectedNodes.length&&(this.options.multiSelect=!0)},e.prototype.selectNodes=function(e){var t,n,r=this.getNodes(e);try{for(var i=u(r),o=i.next();!o.done;o=i.next()){var s=o.value;s.selected||this._selectNode(s,!0)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}1<this._selectedNodes.length&&(this.options.multiSelect=!0)},e.prototype.deselectNodes=function(e){var t,n,r=this.getNodes(e);try{for(var i=u(r),o=i.next();!o.done;o=i.next()){var s=o.value;s.selected&&this._selectNode(s,!1)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.toggleCollapsingNodes=function(e){this._toggleCollapsingNodes(this.getNodes(e))},e.prototype.collapseNodes=function(e){this._toggleCollapsingNodes(this.getNodes(e).filter(function(e,t,n){return!!e.expanded}))},e.prototype.expandNodes=function(e){this._toggleCollapsingNodes(this.getNodes(e).filter(function(e,t,n){return!e.expanded}))},e.prototype._init=function(){var n=this;this.$el.off("itemclick"),this.$el.on("itemclick",function(e,t){console.log("internal"),n.options.multiSelect?n.toggleSelectNodes(t):(n.deselectNodes(/^.*$/),n.selectNodes(t))}),this._contentPanel=v("<div></div>").appendTo(this.$el).addClass(["folder-tree-container"]),this.options.borderColor&&this._contentPanel.css({borderColor:this.options.borderColor}),this._create(this._contentPanel,this.options,0),1<this._selectedNodes.length&&(this.options.multiSelect=!0)},e.prototype._selectNode=function(e,t){if(e.selected=t,e.element&&(t?e.element&&e.element.addClass(["active"]):e.element&&e.element.removeClass(["active"])),t&&this._selectedNodes.indexOf(e)<0)this._selectedNodes.push(e);else if(!t){var n=this._selectedNodes.indexOf(e);0<=n&&this._selectedNodes.splice(n,1)}},e.prototype._toggleCollapsingNodes=function(e){var t,n;try{for(var r=u(e),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.element&&o.nodes&&0!==o.nodes.length){var s=o.element.find(">a>a>i");s.removeClass(this.getNodeProp("iconExpand",!0,o).split(" "));var a=o.element.find(">a>span>i"),l=this.getNodeProp("icon",!0,o);l&&a.removeClass(l.split(" ")),o.expanded=!o.expanded,s.addClass(this.getNodeProp("iconExpand",!0,o).split(" ")),(l=this.getNodeProp("icon",!0,o))&&a.addClass(l.split(" ")),o.expanded?o.element.next().removeClass(["collapsed"]):o.element.next().addClass(["collapsed"])}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype._create=function(e,d,f){var p=this;e.empty();var g=v("<ul></ul>").appendTo(e);return d.nodes.forEach(function(t,e){var n=p._nodeMap[t.id]||[];n.push(t),p._nodeMap[t.id]=n;var r=f+"rem",i=v("<li></li>").appendTo(g);t.element=i,p._selectNode(t,!!t.selected);var o=v("<a></a>").appendTo(i);o.css({fontSize:p.getNodeProp("textSize",!0,t),color:p.getNodeProp("textColor",!0,t),paddingLeft:r}),"string"==typeof d.itemHeight&&o.css({height:d.itemHeight,lineHeight:d.itemHeight}),o.on("click",function(){p.$el.trigger("itemclick",t)});var s=v("<span></span>").appendTo(o),a=p.getNodeProp("icon",!1,t);if("string"==typeof a)v("<i></i>").appendTo(s).addClass(a.split(" ")).css({color:p.getNodeProp("iconColor",!0,t),fontSize:p.getNodeProp("iconSize",!0,t)}).after(t.text);else{var l=p.getNodeProp("icon",!0,t)||"fa fa-folder";v("<i></i>").appendTo(s).addClass(l.split(" ")).css({color:"rgba(0,0,0,0)",fontSize:p.getNodeProp("iconSize",!0,t)}).after(t.text)}if(t.nodes&&0<t.nodes.length){var u=v("<a></a>").appendTo(o);u.attr("href","javascript:void(0)");var h=p.getNodeProp("iconExpand",!0,t);v("<i></i>").appendTo(u).addClass(h.split(" ")).css({color:p.getNodeProp("iconExpandColor",!0,t),fontSize:p.getNodeProp("iconExpandSize",!0,t)}),u.on("click",function(e){e.cancelBubble=!0,e.stopPropagation(),p.toggleCollapsingNodes(t)});var c=v("<li></li>").appendTo(g);p._create(c,{itemHeight:d.itemHeight,props:d.props,propsExpanded:d.propsExpanded,nodes:t.nodes},f+1),t.expanded||c.addClass(["collapsed"])}}),!0},e.prototype.getProp=function(e,t){return t&&t[e]},e.prototype.getNodeProp=function(e,t,n){var r=n&&this.getProp(e,n.expanded?n.propsExpanded:n.props);return(void 0===r||t&&null===r)&&(r=this.getProp(e,n&&n.expanded?this.options.propsExpanded:this.options.props)),r},e.defaults={itemHeight:"43px",borderColor:"#e1e4e9",multiSelect:!1,props:{textSize:"inherit",textColor:"inherit",icon:"fa fa-folder",iconExpand:"fa fa-angle-down",iconSize:"inherit",iconColor:"inherit",iconExpandSize:"inherit",iconExpandColor:"inherit"},propsExpanded:{textSize:"inherit",textColor:"inherit",icon:"fa fa-folder-open",iconExpand:"fa fa-angle-up",iconSize:"inherit",iconColor:"inherit",iconExpandSize:"inherit",iconExpandColor:"inherit"},nodes:[]},e}(s.Widget);t.FolderTree=i});t(r);r.FolderTree;var i=n(function(e,t){var r,i=o&&o.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=o&&o.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var n=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e._contentPanel=null,e._selectedNodes=[],e._nodeMap={},e}return i(n,t),n.prototype.getNodes=function(e){var t,n;if("string"==typeof e)return this._nodeMap[e]||[];if(e instanceof RegExp){var r=[];for(var i in this._nodeMap)if(e.test(i))try{for(var o=l(this._nodeMap[i]),s=o.next();!s.done;s=o.next()){var a=s.value;r.push(a)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}return e?[e]:[]},n.prototype.toggleSelectNodes=function(e){var t,n,r=this.getNodes(e);try{for(var i=l(r),o=i.next();!o.done;o=i.next()){var s=o.value;this._selectNode(s,!s.selected)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}1<this._selectedNodes.length&&(this.options.multiSelect=!0)},n.prototype.selectNodes=function(e){var t,n,r=this.getNodes(e);try{for(var i=l(r),o=i.next();!o.done;o=i.next()){var s=o.value;s.selected||this._selectNode(s,!0)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}1<this._selectedNodes.length&&(this.options.multiSelect=!0)},n.prototype.deselectNodes=function(e){var t,n,r=this.getNodes(e);try{for(var i=l(r),o=i.next();!o.done;o=i.next()){var s=o.value;s.selected&&this._selectNode(s,!1)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},n.prototype.setData=function(e){this.options=jQuery.extend({},n.defaults,e),this._init()},n.prototype._init=function(){this._contentPanel||(this._contentPanel=v("<div></div>").appendTo(this.$el).addClass(["gridview-container"]),this.options.borderColor&&this._contentPanel.css({borderColor:this.options.borderColor})),this._create(this._contentPanel,this.options),1<this._selectedNodes.length&&(this.options.multiSelect=!0)},n.prototype._selectNode=function(e,t){if(e.selected=t,e.element&&(t?e.element&&e.element.addClass(["active"]):e.element&&e.element.removeClass(["active"])),t&&this._selectedNodes.indexOf(e)<0)this._selectedNodes.push(e);else if(!t){var n=this._selectedNodes.indexOf(e);0<=n&&this._selectedNodes.splice(n,1)}},n.prototype._create=function(e,t){var a=this;e.empty();var l=v("<div></div>").appendTo(e).css({display:"flex",flexWrap:"wrap",flexDirection:"row",width:"100%"});return t.nodes.forEach(function(e,t){var n=a._nodeMap[e.id]||[];n.push(e),a._nodeMap[e.id]=n;var r=e.element=v("<a></a>").appendTo(l).css({display:"block",margin:"15px",width:a.options.itemMinWidth}).on("click",function(){a.$el.trigger("itemclick",e)});a._selectNode(e,!!e.selected);var i=v("<div></div>").appendTo(r).css({position:"relative",display:"block",width:"100%",minHeight:a.options.itemMinHeight}),o=v("<img/>").appendTo(i).css({width:a.options.itemMinWidth,height:a.options.itemMinHeight});e.thumbUrl&&o.attr("src",e.thumbUrl);var s=v("<div></div>").appendTo(r).css({width:"100%"});v("<p></p>").appendTo(s).css({textAlign:"center",wordBreak:"normal",whiteSpace:"pre-wrap",wordWrap:"break-word",fontSize:a.getNodeProp("textSize"),color:a.getNodeProp("textColor")}).html(e.text)}),!0},n.prototype.getProp=function(e,t){return t&&t[e]},n.prototype.getNodeProp=function(e,t,n){var r=n&&this.getProp(e,n.selected?n.propsSelected:n.props);return(void 0===r||t&&null===r)&&(r=this.getProp(e,n&&n.selected?this.options.propsSelected:this.options.props)),r},n.defaults={itemMinHeight:"128px",itemMaxHeight:"none",itemMinWidth:"128px",itemMaxWidth:"none",borderColor:"#e1e4e9",multiSelect:!1,props:{textSize:"inherit",textColor:"inherit"},propsSelected:{textSize:"inherit",textColor:"inherit"},nodes:[]},n}(s.Widget);t.GridView=n});t(i);i.GridView;var a=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FolderTree=r.FolderTree,t.GridView=i.GridView,t.Widget=s.Widget});t(a);a.FolderTree,a.GridView,a.Widget;t(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),a.Widget.register(a.FolderTree,"folderTree"),a.Widget.register(a.GridView,"gridView")}));var l=u,f=null;try{f=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function u(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function p(e){return!0===(e&&e.__isLong__)}Object.defineProperty(u.prototype,"__isLong__",{value:!0}),u.isLong=p;var h={},c={};function d(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=c[e])?r:(n=y(e,(0|e)<0?-1:0,!0),i&&(c[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=h[e])?r:(n=y(e,e<0?-1:0,!1),i&&(h[e]=n),n)}function g(e,t){if(isNaN(e))return t?E:P;if(t){if(e<0)return E;if(x<=e)return k}else{if(e<=-N)return T;if(N<=e+1)return C}return e<0?g(-e,t).neg():y(e%_|0,e/_|0,t)}function y(e,t,n){return new u(e,t,n)}u.fromInt=d,u.fromNumber=g,u.fromBits=y;var m=Math.pow;function w(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return P;if(t="number"==typeof t?(n=t,!1):!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if(0<(r=e.indexOf("-")))throw Error("interior hyphen");if(0===r)return w(e.substring(1),t,n).neg();for(var i=g(m(n,8)),o=P,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+a),n);if(a<8){var u=g(m(n,a));o=o.mul(u).add(g(l))}else o=(o=o.mul(i)).add(g(l))}return o.unsigned=t,o}function b(e,t){return"number"==typeof e?g(e,t):"string"==typeof e?w(e,t):y(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}u.fromString=w,u.fromValue=b;var _=4294967296,x=_*_,N=x/2,S=d(1<<24),P=d(0);u.ZERO=P;var E=d(0,!0);u.UZERO=E;var O=d(1);u.ONE=O;var j=d(1,!0);u.UONE=j;var M=d(-1);u.NEG_ONE=M;var C=y(-1,2147483647,!1);u.MAX_VALUE=C;var k=y(-1,-1,!0);u.MAX_UNSIGNED_VALUE=k;var T=y(0,-2147483648,!1);u.MIN_VALUE=T;var q=u.prototype;q.toInt=function(){return this.unsigned?this.low>>>0:this.low},q.toNumber=function(){return this.unsigned?(this.high>>>0)*_+(this.low>>>0):this.high*_+(this.low>>>0)},q.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(T)){var t=g(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=g(m(e,6),this.unsigned),o=this,s="";;){var a=o.div(i),l=(o.sub(a.mul(i)).toInt()>>>0).toString(e);if((o=a).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},q.getHighBits=function(){return this.high},q.getHighBitsUnsigned=function(){return this.high>>>0},q.getLowBits=function(){return this.low},q.getLowBitsUnsigned=function(){return this.low>>>0},q.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},q.isZero=function(){return 0===this.high&&0===this.low},q.eqz=q.isZero,q.isNegative=function(){return!this.unsigned&&this.high<0},q.isPositive=function(){return this.unsigned||0<=this.high},q.isOdd=function(){return 1==(1&this.low)},q.isEven=function(){return 0==(1&this.low)},q.equals=function(e){return p(e)||(e=b(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},q.eq=q.equals,q.notEquals=function(e){return!this.eq(e)},q.neq=q.notEquals,q.ne=q.notEquals,q.lessThan=function(e){return this.comp(e)<0},q.lt=q.lessThan,q.lessThanOrEqual=function(e){return this.comp(e)<=0},q.lte=q.lessThanOrEqual,q.le=q.lessThanOrEqual,q.greaterThan=function(e){return 0<this.comp(e)},q.gt=q.greaterThan,q.greaterThanOrEqual=function(e){return 0<=this.comp(e)},q.gte=q.greaterThanOrEqual,q.ge=q.greaterThanOrEqual,q.compare=function(e){if(p(e)||(e=b(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},q.comp=q.compare,q.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(O)},q.neg=q.negate,q.add=function(e){p(e)||(e=b(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,a=e.low>>>16,l=0,u=0,h=0,c=0;return h+=(c+=i+(65535&e.low))>>>16,u+=(h+=r+a)>>>16,l+=(u+=n+s)>>>16,l+=t+o,y((h&=65535)<<16|(c&=65535),(l&=65535)<<16|(u&=65535),this.unsigned)},q.subtract=function(e){return p(e)||(e=b(e)),this.add(e.neg())},q.sub=q.subtract,q.multiply=function(e){if(this.isZero())return P;if(p(e)||(e=b(e)),f)return y(f.mul(this.low,this.high,e.low,e.high),f.get_high(),this.unsigned);if(e.isZero())return P;if(this.eq(T))return e.isOdd()?T:P;if(e.eq(T))return this.isOdd()?T:P;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(S)&&e.lt(S))return g(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,a=e.low>>>16,l=65535&e.low,u=0,h=0,c=0,d=0;return c+=(d+=i*l)>>>16,h+=(c+=r*l)>>>16,c&=65535,h+=(c+=i*a)>>>16,u+=(h+=n*l)>>>16,h&=65535,u+=(h+=r*a)>>>16,h&=65535,u+=(h+=i*s)>>>16,u+=t*l+n*a+r*s+i*o,y((c&=65535)<<16|(d&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},q.mul=q.multiply,q.divide=function(e){if(p(e)||(e=b(e)),e.isZero())throw Error("division by zero");var t,n,r;if(f)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?y((this.unsigned?f.div_u:f.div_s)(this.low,this.high,e.low,e.high),f.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?E:P;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return E;if(e.gt(this.shru(1)))return j;r=E}else{if(this.eq(T))return e.eq(O)||e.eq(M)?T:e.eq(T)?O:(t=this.shr(1).div(e).shl(1)).eq(P)?e.isNegative()?O:M:(n=this.sub(e.mul(t)),r=t.add(n.div(e)));else if(e.eq(T))return this.unsigned?E:P;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=P}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),o=i<=48?1:m(2,i-48),s=g(t),a=s.mul(e);a.isNegative()||a.gt(n);)a=(s=g(t-=o,this.unsigned)).mul(e);s.isZero()&&(s=O),r=r.add(s),n=n.sub(a)}return r},q.div=q.divide,q.modulo=function(e){return p(e)||(e=b(e)),f?y((this.unsigned?f.rem_u:f.rem_s)(this.low,this.high,e.low,e.high),f.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},q.mod=q.modulo,q.rem=q.modulo,q.not=function(){return y(~this.low,~this.high,this.unsigned)},q.and=function(e){return p(e)||(e=b(e)),y(this.low&e.low,this.high&e.high,this.unsigned)},q.or=function(e){return p(e)||(e=b(e)),y(this.low|e.low,this.high|e.high,this.unsigned)},q.xor=function(e){return p(e)||(e=b(e)),y(this.low^e.low,this.high^e.high,this.unsigned)},q.shiftLeft=function(e){return p(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?y(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):y(0,this.low<<e-32,this.unsigned)},q.shl=q.shiftLeft,q.shiftRight=function(e){return p(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?y(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):y(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},q.shr=q.shiftRight,q.shiftRightUnsigned=function(e){if(p(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?y(this.low>>>e|t<<32-e,t>>>e,this.unsigned):y(32===e?t:t>>>e-32,0,this.unsigned)},q.shru=q.shiftRightUnsigned,q.shr_u=q.shiftRightUnsigned,q.toSigned=function(){return this.unsigned?y(this.low,this.high,!1):this},q.toUnsigned=function(){return this.unsigned?this:y(this.low,this.high,!0)},q.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},q.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},q.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},u.fromBytes=function(e,t,n){return n?u.fromBytesLE(e,t):u.fromBytesBE(e,t)},u.fromBytesLE=function(e,t){return new u(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},u.fromBytesBE=function(e,t){return new u(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var U=n(function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.ErrorCode||(t.ErrorCode={}))[n.kSuccess=0]="kSuccess",n[n.kInvalidOperation=1]="kInvalidOperation",n[n.kAuthError=2]="kAuthError",n[n.kDatabaseError=3]="kDatabaseError",n[n.kParamError=4]="kParamError",n[n.kValueError=5]="kValueError",n[n.kServerError=6]="kServerError",n[n.kFileNotFound=7]="kFileNotFound",n[n.kNotImplemented=8]="kNotImplemented"});t(U);U.ErrorCode;var B=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isNumber=function(e){return"number"==typeof e},e.isInt=function(e){return this.isNumber(e)&&e%1==0},e.isBoolean=function(e){return"boolean"==typeof e},e.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},e.isUndefined=function(e){return"[object Undefined]"===Object.prototype.toString.call(e)},e.isNull=function(e){return"[object Null]"===Object.prototype.toString.call(e)},e.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},e.isPrimitive=function(e){return this.isNumber(e)||this.isString(e)||this.isBoolean(e)||this.isNull(e)||this.isUndefined(e)},e.deepCopy=function(e){return this.isPrimitive(e)?e:JSON.parse(JSON.stringify(e))},e.equals=function(e,t){for(var n in e){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;if(typeof e[n]!=typeof t[n])return!1}for(var n in t){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;if(typeof e[n]!=typeof t[n])return!1;if(e.hasOwnProperty(n))if(e[n]instanceof Array&&t[n]instanceof Array){if(!this.equals(e[n],t[n]))return!1}else if(e[n]instanceof Object&&t[n]instanceof Object){if(!this.equals(e[n],t[n]))return!1}else if(e[n]!==t[n])return!1}return!0},e.trimLeft=function(e){return e.replace(/(^\s*)/g,"")},e.trimRight=function(e){return e.replace(/(\s*$)/g,"")},e.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},e.safeParseNumber=function(e){return isNaN(e)?null:parseFloat(e)},e.safeParseInt=function(e,t){var n=null!=e&&/^[-+]?\d+$/.test(e.toString())?parseInt(e,10):null;return null==n&&this.isNumber(t)&&(n=parseInt(t,10)),n},e.safeParseLong=function(e){return isNaN(e)?null:this.isString(e)?l.fromString(e):this.isNumber(e)?l.fromNumber(e):null},e.isMD5=function(e){return this.isString(e)&&/^[0-9a-f]{32}$/.test(e)},e.longDivToFixed=function(e,t){var n=e;if(this.isNull(n)||this.isUndefined(n))return null;this.isString(n)?n=l.fromString(n):this.isNumber(n)&&(n=l.fromNumber(n));var r="";n.lt(0)&&(n=n.neg(),r="-");for(var i=l.ONE,o=0;o<t;o++)i=i.mul(10);for(var s=n.div(i).toString(),a=n.mod(i).toString();a.length<t;)a="0"+a;return r+s+"."+a},e.genDebugStr=function(e,t){for(var n=1+(t||0),r=arguments.callee;r&&0<n;)r=r.caller,n--;return""+(r?this.getFunctionName(r)+": ":"")+e},e.debugOut=function(e,t){this.debug&&console.log(this.genDebugStr(e,t||0))},e.getFunctionName=function(e){var t=e.toString().replace(/[\s\?]*/g,""),n=50<=t.length?50:t.length,r=(t=t.substring(0,n)).match(/^function([^\(]+?)\(/);if(r&&r[1])return r[1];var i=e.caller.toString().replace(/[\s\?]*/g,""),o=i.indexOf(t);return(r=i.substring(o-30,o).match(/var([^\=]+?)\=/))&&r[1]?r[1]:"anonymous"},e.httpResult=function(e){return{err:e,message:U.ErrorCode[e]}},e.debug=!1,e.mergeBlank=function(e){return e.replace(/\s+/g," ")},e}();t.Utils=n});t(B);B.Utils;var I=n(function(e,t){var r=o&&o.__awaiter||function(o,s,a,l){return new(a||(a=Promise))(function(e,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function r(e){try{i(l.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}i((l=l.apply(o,s||[])).next())})},s=o&&o.__generator||function(n,r){var i,o,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0});t.ajaxRequest=function(n){return r(this,void 0,void 0,function(){return s(this,function(e){return[2,new Promise(function(t,r){var e=v.extend(!1,{},n);e.success=function(e){t(e)},e.error=function(e,t,n){r(t)},v.ajax(e)})]})})};t.uploadFileAjax=function(n,i,o){return r(this,void 0,void 0,function(){return s(this,function(e){return[2,new Promise(function(t,r){if(n.files&&1===n.files.length){var e=new FormData;e.append(i,n.files[0]),v.ajax({url:o,type:"POST",data:e,contentType:!1,processData:!1,success:function(e){t(e)},error:function(e,t,n){r(t)}})}else r("No file to upload")})]})})}});t(I);I.ajaxRequest,I.uploadFileAjax;var A=n(function(e,t){var n=o&&o.__awaiter||function(o,s,a,l){return new(a||(a=Promise))(function(e,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function r(e){try{i(l.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}i((l=l.apply(o,s||[])).next())})},u=o&&o.__generator||function(n,r){var i,o,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},h=o&&o.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0}),t.asset_setup=function(){return n(this,void 0,void 0,function(){var t,n,r,i,o,s,a,l;return u(this,function(e){switch(e.label){case 0:return r={itemMinWidth:"100px",itemMaxWidth:"100px",itemMinHeight:"100px",nodes:[]},i="/",[4,I.ajaxRequest({url:"/api/trust/asset",type:"get",data:{relPath:i}})];case 1:o=e.sent();try{for(s=h(o.data),a=s.next();!a.done;a=s.next())l=a.value,r.nodes.push({text:l,id:l,thumbUrl:"/trust/assets/image?name="+encodeURIComponent(l)+"&relPath="+encodeURIComponent(i)+"&thumb=1"})}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return v("#grid-view").gridView(r),v("#btn-upload-asset").on("click",function(){var e,t,n=document.getElementById("upload-asset");t=!0,(e=n).files&&0!==e.files.length||(t=!1),t&&I.uploadFileAjax(n,"content","/api/trust/asset").then(function(e){alert(e)}).catch(function(e){alert(e)})}),[2]}})})}});t(A);A.asset_setup;var z=n(function(e,t){var n=o&&o.__awaiter||function(o,s,a,l){return new(a||(a=Promise))(function(e,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function r(e){try{i(l.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}i((l=l.apply(o,s||[])).next())})},u=o&&o.__generator||function(n,r){var i,o,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},h=o&&o.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0}),t.whiteboards_setup=function(){return n(this,void 0,void 0,function(){var t,n,r,i,o,s,a,l;return u(this,function(e){switch(e.label){case 0:return r={itemMinWidth:"100px",itemMaxWidth:"100px",itemMinHeight:"100px",nodes:[]},i="/",[4,I.ajaxRequest({url:"/api/trust/whiteboard",type:"get",data:{relPath:i}})];case 1:o=e.sent();try{for(s=h(o.data),a=s.next();!a.done;a=s.next())l=a.value,r.nodes.push({text:l,id:l,thumbUrl:"/trust/whiteboards/image?name="+encodeURIComponent(l)+"&relPath="+encodeURIComponent(i)+"&thumb=1"})}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return v("#grid-view").gridView(r),v("#btn-new-whiteboard").on("click",function(){window.location.href="/trust/create-whiteboard"}),[2]}})})}});t(z);z.whiteboards_setup;var W=n(function(e,t){var l=o&&o.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var n={props:{icon:null,iconExpand:"fa fa-angle-down",iconSize:"0px"},propsExpanded:{icon:null,iconExpand:"fa fa-angle-down",iconSize:"0px"},nodes:[{text:"基本资料",id:"profile"},{text:"账号设置",id:"_account",nodes:[{text:"更改密码",id:"reset"},{text:"删除账号",id:"delete"}]},{text:"素材管理",id:"assets"},{text:"白板管理",id:"whiteboards"},{text:"会话管理",id:"sessions"},{text:"我的收藏",id:"favorites"},{text:"退出登录",id:"logout"}]};var r=function(e){var t=null;return function e(t,n){var r,i;if(B.Utils.isArray(t))try{for(var o=l(t),s=o.next();!s.done;s=o.next())if(e(s.value,n))return!0}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}else{var a=t;if(n.call(a))return!0;if(a.nodes)return e(a.nodes,n)}return!1}(n.nodes,function(){return"_account"===this.id&&(t=this),this.selected=this.id===e,"reset"===e&&t&&(t.expanded=!0),!1}),n};t.getSettingsMenuData=r;var i=function(e){switch($("#treeview").folderTree(r(e)),$("#treeview").folderTree("selectNodes",e),$("#treeview").on("itemclick",function(e,t){t.id&&0<t.id.length&&"_"!==t.id[0]?window.location.href="/trust/settings/"+t.id:t.nodes&&0<t.nodes.length&&$(this).folderTree("toggleCollapsingNodes",t)}),e){case"assets":A.asset_setup();break;case"whiteboards":z.whiteboards_setup()}};t.Settings=i}),R=t(W),F=W.getSettingsMenuData,L=W.Settings;e.default=R,e.getSettingsMenuData=F,e.Settings=L,Object.defineProperty(e,"__esModule",{value:!0})});
